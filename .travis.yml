language: java
jdk:
- openjdk11
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build pull request
    script: "./gradlew check jacocoTestReport"
    if: type = pull_request
  - stage: build master
    script: "./gradlew check jacocoTestReport publish"
    if: branch = master AND NOT type = pull_request
  - stage: build and stage release
    if: branch =~ /release/
    script: "./gradlew publish bintrayUpload -Pversion=${TRAVIS_BRANCH#'release/'} --stacktrace --info"
  - stage: release
    if: branch =~ /release/
    script: "./gradlew closeAndReleaseRepository"
  - stage: github release
    if: branch =~ /release/
    script: "./gradlew jar -x test -Pversion=${TRAVIS_BRANCH#'release/'} && ./scripts/github-release.sh"
after_success:
- bash <(curl -s https://codecov.io/bash)
before_install:
- |
  if [[ "$TRAVIS_PULL_REQUEST" = "false" ]]; then
    openssl aes-256-cbc -K $encrypted_664da3a116f7_key -iv $encrypted_664da3a116f7_iv -in web3j.asc.enc -out web3j.asc -d
  fi
env:
  global:
  - secure: O7Zz21jz2axf3ZpS8ZPv+eSsSLSkwldo9DcmoT1x4CnZUPjfUK1kvLUG2lPiTiKugaZEtGZW1Zj4cAPFoZFY1qtRz6v0sbz+c4SdGgEiA5zaSovimxvgs55frA5/KfFvNIbuBzpc0wW1GEGnnVr3SBpfKloHCRp2cTFOdHOdEYY9sKSM8qyB5Ey9E0YUKwrXssFCZvAtjvcJrMymB26mCaMW+XP5LMcBcCYbzShPUhFHd94fUBXNoqvGi834twj5haP9DQ2fEqN+usW8hCeZMym6SjP1qnyq3BLp5YkEFSAmfJZ1uTwrea8TatzF/N6ds/v5hkGGIgELmqQi9ZgQMLcYvEs8WWFQn2yTM01aWZoh7Tbe2fYQeXtr2Am5qzEcfRmDgTFiQZlcar2E3glTQInBcTlz3vWvwi+MRfJvJgrjXwdaoymjLSVU2Yaf2IRXt2/Ld6xePTrkO1MKPp29QkoKXDTFlMcpEUoEQ4JnsvCQo/Na5bcxIkiz3hdkzK1bS5LbPwgdmR9LiBVFhTwjjgQYb53PaCDrTKr5v5HW0mBPethByH1GK5+4hc7zoXYHPb3dWxaPzR/zL/SmuAsupemx57wlA+yAFGWKdVdGJzD/LuXeabjdkRlHVSAQOLUw/MnbWqkZVHcEYB6QHrqAA6LyoZssx9JiQBX/ejAvyIw=
  - secure: g+nD5ZurcI9DgarqWvvOY8VFQtVgEemG9irplwQ8yso+7/iEuERGKCwMTuwvSBhhg37RalBDoJDHetcprQB5Crau9+p6uM0FPhJt/R2YYwvGT44V/WiKhjbyG+vONNvuCrUi1YUJYFBWa23EsVieo9lDs4HJgrKxd6ltUAt+bOWMZkQ42n532Y5iEppJml4LIb7pki/l6BhfnEtNvfijZQVDfUztbcp/ie24tNBMuYn1jPPVdS8ODaPefHuhEIC/OmVSf9oxSz+39PqRIVWyWuYjLhg7W8UdkzfAumgzgBXMl9N0mUwLMGf5XdzQV6h9s+VGt2ZKFx/xw6NM14NJAbZjzwLpaSUs6f8EA+bqbAvOTr05Gc9ZoLTo819dqqV8ZltGEwWwXb2VwP1QlTUP4A9hM2/DT6FHlPe9Hkwfw2HtifsTtsQ0IHxw74mVuTcLDNWugZWIRI07a8VRm9ipPxEtNGoH0igqJW6QEk2vmu3VqW98ZVHERjZf3AHuMducLFKW/btEzWNpa0Lo9RbB09HKibe18IAYwmSQTLxOiVzX1ZlALPc2lhA9rJags6oV+CW/M+QoCvJL6yJMUSgx832ADjc2eQpFMGxo3iWcV5FM2u5WMZJBWkL4R+A7PwZjNWEhL8zAELl9Tkf1w0bZ1R9gp5PpQ0Y2aqCqN8Psv+g=
  - secure: CAY11k+tAEmcnhdp7syKDnI0AHr2GdjI1jgTO7QhAzGhSyPBX1icU3QsvP4DmI9bSe25rwB+Imk2eolYztjHAeTbJ7ACtSD9yY6PjQdUO/k9dHZJVQomamIl1cEbmsXVavSrMV+6cJUJw+Q0r8WZCI6Qu0fKt+Df0IyjSm4MY8Kwb/aYgF/nvxPpywv3ahSFUgXY/voqqsNBQgZFlO86v84EaTHR5MiIa+QAoowRNLtBQwbAVpAskRT3ZXi+MZqSjXhvxln4IBeANinmlaYS1rY/QEWgLflGRnbMtDj4YPHR74cDHC9wMHXqTJuEpLB8pxkRgU6v1GmfShxLDu5+F1GCnoJ5V7B0zoXY5Q1ZNRUZBpt7Fg3DIqCma2kEVCwEWJZGCk6wftdeGPSLHhZALFV+RWResCnNL7hiten5LxPXP2G3o+FAsU7Q4xqBVTCsyER3Sco1nZFOCBM53tN6irOZP1cv/iB/bayPLerMkrTMYSsHfyUB4n7IqxwU9PqsUjB4k1cHvOsHON/vUzS/Su5u683I0g96PgXTV9WcvHEqTfU6l6xUH5+u0MXZuk4qEoXH42a7O4uK2XLLrL9flJv4QU6cSLxEGLQ26d04+3H2KRMdifj1KtM8NTwXSPT+pHj0T9CVNKMJ8YGjJlkLzWTNhyd8yDtlkTuF/ZxATF0=
  - secure: Ire87XI8UlJvugLuUEn0FTxj+2vZJ42FuiOs5L6gSwqxSe9ncvWqafwBrOrqpmGp8PhxoNR/WcggmBlBQWqOIYQp9L8SCfbAcP1fSD2/sSkkkl+jJXc8mN/mt2WzyKQf/tDUbFylOKaJDqvGyHnloyuruRBmHYSfA//8rT4pTJGo9zCjOXJ17hZUjQm1rAEIfqfHMJk02HNewU7ebvkuuN7YhMz96q6sYnmmeUxQteVBT/aqFqO4+PDC9h3Lnz8Zc/hGy897iSNwhU9hW8tlfm63grKTHdvE81IWdo5xmPUzKjJ98ujIbbWMSoV1FlJAI1RCXr8myylA/R4bX/pGU6hWIXOBv0jETZSLwGDGzXnpIiqeTBQIkiVORCbR5GItu0hy5N/9FG0NpGuEMTnQ95e4EziU3G/FOrD+PbFNSWww/0q6Gf+aLsSAbMIB7DPAlfIlRfwhsnxe0Q1+MNqZpkwBACMPJR+3U6b1B7FSr58Ix/Qg42LelldhoLblSr+LGwAi2MfMAU0iyvGRjb8dnCreYjtCcAyln+oeCLbHpfv71DPX/y5LR78dGSlPayAjzqlekZVuiKKhV2cEBL41oo49ILlABf882LcA3ITc12hIVa9kJ/xUnr7Qkjqw0lTuAQxRbLGRDnu43MVqFCAqeHoV1Bkc8boQRgs1qNvEvVk=
  - secure: 53sepyUhcAG48y33dunwQFtZWSLZtCX090J6V4F/rWByzopihq4OPiu2JrQyv83/wMAfiGq8MedFvZTKHvlKofNIBZyIgPDSrBYM7Bg6SAzuoxxtw9tv0UgcklXHaSbNfhlZgV5o98ALKcmZdWN4t+iuboZAFExYnqnQJ/3E8L8J9oQqwEJ+5AklkuvRXRKDRusgV87GGLYn2gbQJ87pvHTOl2er3Jaezb2/C7QSLG9U63y4JE5DYhtg46B5Fzihq5NEWd95qZYapEEOAJD7o9e6k+PmBdj6bfcRrE4fB7CeJqjsMRLaJTyWhPngiHOjc5E2hE14UMr1fKY8fjMpg1cwgi33xf+zljJtPaSfYsF6VmsOZ107ZLH1AT+S/QDUp7BpDq9CqQTQBfbyKpkfYka0vAFa3273JM3YNYAfRjq2V8lNjJGjAnOvmwpT5v1BMw0KBObUzJNBwJh1R7bEj5OveQDNDZcfn3oR4gL2zvkKkGi0AqJXvh0wpc50p695NBrjCGBDD7q1+FZtM53LCAzeir8Ql0tBtxsh4+EARgdswKq2SmFmu6wucuRzqxbf3Cd5F9oKkMjmZ6OHky0F4IElHmZoLPJcfSmISBVz+jDJOALuyAyUy5yIIdVoa0e3vCWdp0I5qOsVPh6yBoSDR+f+DfXQrtOw0dmhVNWL2RQ=
  - secure: QQhqlsLKQM4SHTSxgSrwEpONDpSlKTPFgso6GJD7NTqUgzuJEyUEG7xtRjetgAHKPUVg4mKW4pnNadKfa4x5/iR83zmLAARtqFSj2w5vcfrN5aKhhaTeuDX7rTBpO367gUvIupDaenQpkKThlKbX9LevXrHamex1lTYZGymYTBqJsIHNtoIZSpQ2CXMgvTOpX99BDd5JVg3cV0b7XOP+adbbUeW2OVnhZo3S4YawXhRD03T2Ui9YEyCK28WwvF010ruDX8Kmcznb0idJ2yKFeYca8Oj04t974AfF58Z/oy+JvyHsuYyJwawALTHvrMbF6ZitbegzbsoW61PpvRwtJrMgedREmFMeuqEvXuegeW458MV3WPxcnk5bmxc17IbE0uLDlMf2DO6EWNd9m2d24w9Nr6ZcC91WTkrVswFdSok5aVTvy9ntw+tvcUL/rN4gsxp5yk2m0CzHrJ4dtQL9Fzb86NDsUZRVcqvwu/rqIpcCfolN5oJIDll3h1gp9w/PAoN7AlQzu5KeRoMXhL9OMFpe1AwrgG/imxCLsNek2vf5fNR+o4aID6GAzz4Hy8S69B0KXAi2Fl203rMVU2sBoNM6YIPgXivi0AF2Jo7uzHikAGWGM1Apmrw1rA5T1hkXk1Ydl9nxdRoJEunt7f+elOThcxjOH0xi3E5PePsBoDU=
  - secure: 1OLTJ62qrfG5GxRVqfdVZHhkQct/0qvG2VxyamUHSgmfusazH0rRiPBqFzjlrbAiDDxSABvRBtNHxk61XdJbNSEAVGV9qU0qEUAB7bsEytAw3Hjyxl2wZhj+xjcF1fQV5KgZFr1GCO2LqUTcOOB8tpylhSn89JZsZ9jzecB0spWGBycy/0Hqet9hR9d8l0I49Eb4orIy0zNkz2fjjLFfcCbbHHqjSiCsX6rdODMwQcQMIde4vxMtWzv6fLdLpRcKi3JUw2fDgZINmLHbTkLp8AsXhHxk7QSZjF9KRnxut2WEX9XGnUwR0k01EgtJSDqM1C0hOTJPk3OC3a95SItfe18smxQmco/tgccjudNgytAGhnYF5dWibtuXSdhlEoShtlYnwJatkWtEE8WtcOPayXME/T8ABt1q+sTShme1EEpErIF1GwfnXhu3SdXifkA68+99FOpJxpDZIw0CkeTC5lxMHDKKsQrwh72vWbon2M2JUKKU2QRPaLRoYPgmgSKWwb/pR3sWsOjun9RaUyUzIjzEH3+zpqjyIQLfzx/sTmqQOgIURe3zbGaJALZ9sww8ADjW1RE6EUABTG+8DOq/ERNOKTXqpy/KhzD4P3rtWkJAKEekEPP3ba6J07SMiojRPG4WN8q/6fYGXSSIluZIvYLPgT/s0vmqjOfY6YfHYPg=
  - secure: rACRGtVkZs2AHJFR17yfgqJvNB/znZdjG47Qs8si87di9DoOMsJLUrqlYq3734u18MZTpx2Zk++DXPcXAALk4rqEoTEVhVPaOnQuyg5K//sYguVrIbCHZcSge99X4ynzpAP02sC/w4k5K8vsuBRLx75DGWjYxhXgtjes0sP0Iiylj67016E7HQ6/9GxNa3kdX36NKNLM0sly9BxZ8zikY2TabeHlcaQ5WTrzxj8MnlkfNfboyxfnx6Y+Z1WKBQYoKsw+X7lRPf17SmyRQX8RoTiMG1urnUSfIPdM4f5cZj+pIdLF9pl84j10z2r9vvOJreBOFPB1RyKSU1eDPPxsmBxooJdKql/TOIlW/rqqVwYPIRtl9vtzM5JJ6hlrvjMoGYdQbp5RERtCJxu4M161FPy5OVe536k5ej9CgAkbI8pQ6NnKeoNvIi5VKfSZbTUlG5aXICpHAo8XY6ggrdjOErLlABTtk3SumAofAUs2GI10nCwoEyfOPAB0wKARdjBgNLqrEqDUGEqyHdBfY2km/HguzuKkC9LTYEXtHJtAoefoMuAZR/vje6RugghU+VhTSEbeh/8uAbxDOFaRxb1rlQ1zT450NfN4qxtOWsPi6vbRp3PZafnspAtgbZbwcCblH1thGvkx5Sx3J7W8tqtyQFhOMp019KcdVbgcj+e4khU=
  - secure: GCtNdJZ86+Vx+FKsnlnVQ/u/wSEpO69s8+0Om2gKhUFXs1a7pnEdm3eM3xaMtgpUDj8uXRlRMYx1of4CPUcwiwxDLXVm3M3pXSkJ+AIYhDargCbKOluFDwl1Arwn8t6R0Jw97/4P5+kZ8mG+e2ykJc33Ij77LEzrsBf1p6d8nMVWDhgJyyqxXPSL13k22g1h4D39iusc5qmNwOfAoH1npdp4Z7bUuz66Iwx4Hr9ay3EJG7fM1S0NTaIV/e2Nv8Q1KRcW58+4Yy1BbGHP98dg5RpJ3ZXU0jb78uZy+DKdndaOnE+tfnTZ/v4QPhcfxQmuVBmdsKbau0ZnSUxpxJLjZwHFm6RCiitt6ndI2Qj3hxayDTOSDaLuRUO90nYWbiedslaJmgMCrx523Iv2BR+vXOPYsWXLsyoYjLmSx90gfoZd6CQ9GdNh0JpOfkh/eOsB+qrGL7k98k6/Fj70TnO7w7kwX0VsrjBto2mP4+QwQ5hOXhH3zmN08wpJc8THycN6mD/nktnCs0/G5G+HdWIaN46iB4tjUjqPpqbPafrGpRI5XY5DuGVwoCRIsRC3/vd2yU6hW3lrzxeXeWydOtHqirkxERvooJKi6k030WTLlxU+kdodaQ3XPjcDVWTsZij760qsKDfxadG/+VP96Tv1tJBVFjcxiODgQH4h1HrNjws=
